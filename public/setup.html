<!DOCTYPE html>
<html lang="en">
<head>
    <title>Setup Profile</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Complete Your Profile</h1>
        <p>Please enter your phone number for SMS reminders:</p>
        <input type="text" id="phone" placeholder="Phone Number">
        <button onclick="saveProfile()">Save</button>
    </div>

    <script>
        async function saveProfile() {
            const username = localStorage.getItem('username');
            const phone = document.getElementById('phone').value;

            if (!phone) {
                alert('Please enter a phone number.');
                return;
            }

            // Save user to Firestore
            const response = await fetch(`https://firestore.googleapis.com/v1/projects/re-mind-419f4/databases/(default)/documents/users?documentId=${username}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    fields: {
                        username: { stringValue: username },
                        phone: { stringValue: phone }
                    }
                })
            });

            if (response.ok) {
                alert('Profile saved!');
                window.location.href = 'index.html';
            } else {
                const errorData = await response.json();
                alert('Error saving profile: ' + errorData.error.message);
            }
        }
    </script>
</body>
</html>